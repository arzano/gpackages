<li class="list-group-item">
  <strong><%= annotate_bugs changelog.message.lines.first %></strong>
  <div class="kk-byline">

    <img class="rounded-sm inline" data-toggle="popover" data-img="http://placehold.it/400x200" src="<%= gravatar_url changelog.author_email %>">
    <%= mail_to changelog.author_email, changelog.author_name %>
    <%= i18n_date(changelog.author_date) %>,

    <% if changelog.author_name != changelog.committer_name || changelog.author_date != changelog.committer_date %>
      <img class="rounded-sm inline" src="<%= gravatar_url changelog.committer_email %>">
      <%= mail_to changelog.committer_email, changelog.committer_name%>
      <%= i18n_date(changelog.committer_date) %>,
    <% end %>

    commit <%= link_to_gitweb_commit changelog.id%>
  </div>

  <table class="table table-condensed kk-changelog-diffstat">

    <% unless changelog.files["added"].empty? %>
      <tr class="kk-success">
        <td class="kk-changelog-diffstat-icon"><span class="octicon octicon-diff-added"></span></td>
        <td><%= safe_join(changelog.files["added"].select { |file| file.include?(@package.category + '/' + @package.name) }.map {|f| link_to_gitweb_ebuild_diff(f.split('/').last, changelog.id, @package.category, @package.name) }, ', ') %></td>
      </tr>
    <% end %>
    <% unless changelog.files["modified"].empty? %>
      <tr class="kk-warning">
        <td class="kk-changelog-diffstat-icon"><span class="octicon octicon-diff-modified"></span></td>
        <td><%= safe_join(changelog.files["modified"].select { |file| file.include?(@package.category + '/' + @package.name) }.map {|f| link_to_gitweb_ebuild_diff(f.split('/').last, changelog.id, @package.category, @package.name) }, ', ') %></td>
      </tr>
    <% end %>
    <% unless changelog.files["deleted"].empty? %>
      <tr class="kk-danger">
        <td class="kk-changelog-diffstat-icon"><span class="octicon octicon-diff-removed"></span></td>
        <td><%= safe_join(changelog.files["deleted"].select { |file| file.include?(@package.category + '/' + @package.name) }.map {|f| link_to_gitweb_ebuild_diff(f.split('/').last, changelog.id, @package.category, @package.name) }, ', ')  %></td>
      </tr>
    <% end %>

  </table>
</li>
